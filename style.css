/*** HTML5 compatibility ***/

[hidden]  {
  display: none;
}

/*** Animations ***/

@keyframes appear
{
	0% { opacity: 0 }
	to { opacity: 1 }
}
@-webkit-keyframes appear
{
	0% { opacity: 0 }
	to { opacity: 1 }
}

@keyframes disappear
{
	0% { opacity: 1 }
	to { opacity: 0 }
}
@-webkit-keyframes disappear
{
	0% { opacity: 1 }
	to { opacity: 0 }
}

@keyframes fade-in-out
{
	0%,to { opacity: 0 }
	50% { opacity: 1 }
}
@-webkit-keyframes fade-in-out
{
	0%,to { opacity: 0 }
	50% { opacity: 1 }
}

@keyframes rumble 
{
	0%,to {}
	50% { transform: translateY(-0.2em) }
}
@-webkit-keyframes rumble 
{
	0%,to {}
	50% { -webkit-transform: translateY(-0.2em) }
}

@keyframes shudder 
{
	0%,to {}
	50% { transform: translateX(0.2em) }
}
@-webkit-keyframes shudder 
{
	0%,to {}
	50% { -webkit-transform: translateX(0.2em) }
}

@keyframes box-flash
{
	0% { background-color: white; color: white; }
	to {}
}

@-webkit-keyframes box-flash {
	0% { background-color: white; color: white; }
	to  {}
}

/* Slightly eased-out shudders */

@keyframes shudder-in
{
   0%, to { transform: translateX(0em); }
   5%, 25%, 45% { transform: translateX(-1em); }
   15%, 35%, 55% { transform: translateX(1em); }
   65% { transform: translateX(-0.6em); }
   75% { transform: translateX(0.6em); }
   85% { transform: translateX(-0.2em); }
   95% { transform: translateX(0.2em); }
}
@-webkit-keyframes shudder-in
{
   0%, to { -webkit-transform: translateX(0em); }
   5%, 25%, 45% { -webkit-transform: translateX(-1em); }
   15%, 35%, 55% { -webkit-transform: translateX(1em); }
   65% { -webkit-transform: translateX(-0.6em); }
   75% { -webkit-transform: translateX(0.6em); }
   85% { -webkit-transform: translateX(-0.2em); }
   95% { -webkit-transform: translateX(0.2em); }
}

/*** Main formatting ***/

body
{
	font: 100% Georgia, serif;
	background: #fcfcfc;
	color: #000;
	margin: 0;
}

h1
{
	font-size: 2.5em;
}
h2
{
	font-size: 2em;
}
h3
{
	font-size: 1.5em;
}
h1, h2, h3, h4, h5, h6
{
	line-height: 1em;
	margin: 0.6em 0;
}

/* Used for all links - hook-links, passage-links, external links... */
.link
{
	cursor: pointer;
}

/* The story data div */
[data-role="twinestory"]
{
	display: none;
}

#story
{
	width: 60%;
	margin: 4% auto;
	font-size: 1.5em;
	line-height: 1.5em;
}

.passage
{
	position: absolute;
	width: 60%;
}

.passage *
{
	position: relative;
}

@media screen and (max-width: 1280px)
{
	#story
	{
		font-size: 1.25em;
	}
}

@media screen and (max-width: 960px)
{
	#story
	{
		font-size: 1em;
	}
}

@media screen and (max-width: 640px)
{
	#story
	{
		font-size: 0.8em;
	}
}

/* Transition-containers */

/* This contains the inner two containers, and the transition-out-container, if any */
.transition-main-container
{
	position: relative;
}

/* This contains the arriving entity */
.transition-in-container
{
}

/* This contains the departing entity */
.transition-out-container
{
	position: absolute;
}

/* Transitions */

/* Invalid/instant transition */
.transition-in
{
	animation: appear 0ms step-start;
	-webkit-animation: appear 0ms step-start;
	/*background-color: hsla(10,50%,50%,0.5);*/
}

.transition-out
{
	animation: appear 0ms step-end;
	-webkit-animation: appear 0ms step-end;
}

/* Dissolve, fade-in */
[data-t8n^=dissolve].transition-in, [data-t8n^=fade-in].transition-in
{
	animation: appear 0.8s;	
	-webkit-animation: appear 0.8s;
	/*background-color: hsla(120,50%,50%,0.5);*/
}

[data-t8n^=dissolve].transition-out
{
	animation: disappear 0.8s;	
	-webkit-animation: disappear 0.8s;	
}

/* Shudder, shudder-in, shudder-out */
[data-t8n^=shudder].transition-in, [data-t8n^=shudder-in].transition-in
{
	animation: shudder-in 0.8s;	
	-webkit-animation: shudder-in 0.8s;	
}

[data-t8n^=shudder].transition-out, [data-t8n^=shudder-out].transition-out
{
	animation: shudder-out 0.8s;
	-webkit-animation: shudder-out 0.8s;
}

/* Box-flash */
[data-t8n^=boxflash].transition-in
{
	animation: shudder-out 0.8s;
	-webkit-animation: shudder-out 0.8s;
}

/* Modifiers */
[data-t8n$=fast]
{
	animation-duration: 0.4s;
	-webkit-animation-duration: 0.4s;
}

/* Modifiers */
[data-t8n$=slow]
{
	animation-duration: 1.2s;
	-webkit-animation-duration: 1.2s;
}

/* Sidebar */

.sidebar
{
	left: -5em;
	width: 3em;
	position:absolute;
	text-align:center;
}

.sidebar .icon
{
	display:block;
	margin: 0.33em 0 1em 0;
	opacity: 0.1;
	font-size: 2.75em;
	border-bottom: none;
	text-decoration:none;
}

.sidebar .icon:hover
{
	opacity: 0.3;
}

/*** Inner passage formatting ***/

.enchantment-hover
{
	border-bottom: 1px dashed #666;
}

.enchantment-mouseout
{
	border: hsla(200,50%,50%,0.25) 1px solid;
}

.enchantment-mouseout:hover
{
	background-color: hsla(200,50%,50%,0.25);
	border: transparent 1px solid;
	border-radius: 0.2em;
}

.passage-link, .enchantment-link
{
	color: #4169E1;
	font-weight: bold;
	text-decoration: none;
	transition: color 0.2s ease-in-out;
}

.visited 
{
	color: #6941e1;
}

.passage-link:hover, .enchantment-link:hover
{
	color: DeepSkyBlue;
}

.passage-link:active, .enchantment-link:active
{
	color: #DD4B39;
}

.visited:hover
{
	color: #E3E;
}

.broken-link
{
	color: #993333;
	border-bottom: 2px solid #993333;
	cursor: not-allowed;
}

.error
{
	background-color: #E9D;
	border-radius: 0.2em;
	padding: 0.2em;
	font-size: 1rem;
	cursor: help;
}

/*** Debug mode ***/

.debug-mode [data-macro][title] {
	cursor: help;
}
.debug-mode [data-macro] { display:inline-block; }
/* Colours for generic macros */
.debug-mode [data-macro]:nth-of-type(4n+0) { background-color: hsla(80,20%,50%,0.15); }
.debug-mode [data-macro]:nth-of-type(2n+1) { background-color: hsla(120,20%,50%,0.15); }
.debug-mode [data-macro]:nth-of-type(4n+2) { background-color: hsla(160,20%,50%,0.15); }

/* Colours for specific macros */
.debug-mode [data-macro="display"] { background-color: hsla(200,100%,50%,0.1) !important; }
.debug-mode [data-macro="if"],
.debug-mode [data-macro="elseif"],
.debug-mode [data-macro="else"] { background-color: hsla(120,100%,50%,0.1) !important; } 
.debug-mode [data-macro="if"].false-if { background-color: hsla(0,100%,50%,0.2) !important; } 
.debug-mode [data-macro="print"] { background-color: hsla(60,100%,50%,0.2) !important; } 
.debug-mode [data-macro="set"] { background-color: hsla(30,100%,50%,0.2) !important; }
.debug-mode [data-macro="script"] { background-color: hsla(45,100%,50%,0.2) !important; }
.debug-mode [data-macro="style"] { background-color: hsla(180,10%,75%,0.2) !important; }
.debug-mode [data-macro="click"] { background-color: hsla(90,75%,50%,0.2) !important; }
.debug-mode [data-macro="replace"],
.debug-mode [data-macro="prepend"] ,
.debug-mode [data-macro="append"],
.debug-mode [data-macro="remove"]  { background-color: hsla(20,75%,50%,0.2) !important; }

/* Colours for other things */
.debug-mode .hook  { background-color: hsla(220,100%,50%,0.1) !important; }
.debug-mode .pseudo-hook  { background-color: hsla(40,100%,50%,0.1) !important; }

.debug-mode .hook::before, .debug-mode .pseudo-hook::before
{
	content: "["
}

/* Show IDs of hooks */
.debug-mode .hook::after
{
	content: "][" attr(data-hook) "]"
}
.debug-mode .pseudo-hook::after
{
	content: "]"
}

/* Show destinations of links */
.debug-mode .passage-link::after, .debug-mode .broken-link::after
{
	font-size: 0.8rem;
	content: attr(data-passage-link)
}

/* Show the macro name */
.debug-mode [data-macro]::before
{
	content: attr(data-macro);
	padding: 0 0.5rem;
	font-size: 1rem;
	background-color:  inherit;
	border: 1px solid rgba(255,255,255,0.5);
}

.debug-button
{
	position:fixed;
	bottom:0;
	right:0;
	width:66px;
	height:66px;
	border-top-left-radius: 1em;
	border: solid #fff 2em;
	box-shadow: -0.1em -0.1em 1em 1em #888;
	background: #fff;
	transition: opacity 0.2s; -webkit-transition: opacity 0.2s;
	opacity: 0.5;
}

.debug-mode .debug-button
{
	opacity: 0.8;
}
.debug-mode .debug-button:hover
{
	opacity: 1;
}
.debug-button:hover
{
	opacity: 0.6;
}

/*** Styling elements, for general use by Twine authors ***/

pre
{
	font-size:1rem;
}

small 
{
    font-size: 70%;
}

big 
{
    font-size: 120%;
}

mark
{
	color:rgba(0,0,0,0.6);
	background-color: #ff9;
}

ins
{
	color:rgba(0,0,0,0.6);
	background-color: hsla(45,100%,90%,0.5); /* Yellowed correction fluid */
	border-radius:0.5em;
	box-shadow: 0em 0em 0.2em hsl(45,100%,80%);
	text-decoration:none;
}

del
{
	background-color: #000; /* Censored text */
	text-decoration:none;
}

/* Who am I to tell authors not to use non-standard tags? */

center
{
	text-align:center;
	margin: 0 auto;
	width: 60%;
}

blink
{
	text-decoration: none;
	animation: fade-in-out 1s steps(1,end) infinite alternate;
	-webkit-animation: fade-in-out 1s steps(1,end) infinite alternate;
}

/*** Secondary text styles, for general use by Twine authors ***/

.outline
{
	color: white;
	text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;
}

.shadow
{
	text-shadow: 0.08em 0.08em 0.08em #000;
}

.condense
{
	letter-spacing: -0.08em;
}

.expand
{
	letter-spacing: 0.1em;
}

.blur
{
	color:transparent;
	text-shadow: 0em 0em 0.08em #000;
}

.blurrier
{
	color:transparent;
	text-shadow: 0em 0em 0.2em #000;
}

.blurrier::selection {
	background-color:transparent;
	color:transparent;
}

.blurrier::-moz-selection {
	background-color:transparent;
	color:transparent;
}

.smear
{
	color:transparent;
	text-shadow: 0em 0em 0.02em rgba(0,0,0,0.75), -0.2em 0em 0.5em rgba(0,0,0,0.5), 0.2em 0em 0.5em rgba(0,0,0,0.5);
}

.mirror
{
	display:inline-block;
	transform: scaleX(-1);
	-webkit-transform: scaleX(-1);
}

.upside-down
{
	display:inline-block;
	transform: scaleY(-1);
	-webkit-transform: scaleY(-1);
}

/* Animated effects follow */

.fade-in-out
{
	text-decoration: none;
	animation: fade-in-out 2s ease-in-out infinite alternate;
	-webkit-animation: fade-in-out 2s ease-in-out infinite alternate;
}

.rumble 
{
	-webkit-animation: rumble linear 0.1s 0s infinite;
	animation: rumble linear 0.1s 0s infinite;
      display:inline-block;
}

.shudder 
{
	-webkit-animation: shudder linear 0.1s 0s infinite;
	animation: shudder linear 0.1s 0s infinite;
      display:inline-block;
}

/* Insertion effects */

.shudder-in
{
    animation: shudder-in 1s ease-out;
    -webkit-animation: shudder-in 1s ease-out;
}

/*** Base64 encoded images ***/

.debug-button
{
	background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABBCAMAAABSHoJ0AAAABGdBTUEAALGPC/xhBQAAAV9QTFRFAAAAAAAAAQEBAwMDBAQECAgICQkJCwsLKCgoAgICGhoaEhISQUFBIiIiJiYmLi4uNDQ0DAwMRkZGYWFhKioqFhYWHR0dDQ0NIyMjQkJCJycnMDAwBgYGLS0tExMTNTU1Pz8/QEBAFRUVR0dHUVFRVVVVFxcXZWVlZ2dnaGhobm5uenp6fn5+GRkZcnJyZmZmHh4eeHh4X19fHx8fU1NTOTk5Ojo6Pj4+EBAQCgoKYmJiFBQUc3NzKysrREREampqbGxsBQUFWVlZWlpaNzc3KSkpS0tLXl5edHR0dXV1d3d3VlZWTU1NT09PICAgODg4MTExDg4OY2NjUlJSGBgYMjIyXFxcXV1dZGRkDw8PSUlJSkpKHBwcaWlpOzs7a2trTk5ObW1tPDw8b29vcXFxPT09SEhIdnZ2NjY2YGBgLCwsV1dXeXl5MzMze3t7fHx8fX19BwcHW1tbERERJSUlRf2RbAAAAAF0Uk5TAEDm2GYAAAMDSURBVHhezdZFs+Q4EIXR+7kYHjMzMzQzM/cwM/P8/5hQhh22/MqOqvZmzi69uFYp0yopn06grmIADotHMKeefDqlJMyf6sEtaClpMwDGe13410r6A6DHiIZ8Az3+EmBLIy2A+c9kNoG2utYiqS5tTOAsq0v34aMywF1JZRIChSrlB8rxkuChHkO/DMB3knSzArM7csr2LNMLbkmqgEwTUOibCoxGsdeU5Y5LuA1wOLJ6twKQWPN16NOTIL/BIE2RNNRxp79UJ0eMtUsM6BRPahjmcIbVEeavBTwnZzeLf5SBTso6YwaU4Tmsv0+KPF9tu2I8O2P4c12FY9WJ8MjvN9CylleVqURLipeyoYSfMVckwWBuT9UmdFm6ACzI+Z3QtrQKyjBlETUMW9IszkVJ+gLiZcwzpM5GLQLDkdTA4HfMCj5UR7+BtEb0VU54fWkkq/6sHf0Eqos4NUnbhC7JeeMFwkNFXiu2S2hGUtzcqF0YwqKiUBnWUxMaPZjEcBx97MmD5xqMyaS+/ZXkTN/BrCpyL5F4ihkan1lPjfE0pbioABwoNgncltnB86+kI5mX3kz3c09ZSJqWzZCd9kFDXSI26erzwJ5l19UlaOittXxHzhCApEF+VJegpqSfcM6pSaAuwRV5liA1BRoBfzfPJ8/BXeiTb4VQ1NQfMHuKnMO8kLkBS0rZqWJ4KkNkzWtBNJTtaL2+fkwqgracZ0SarhwDZTiEuVQEcp76NTkbD6Qjrrr6VyI8kURO+09hVv61QIbk7jwCZRsID8sg9a/6hsiBNAfK0QzvM4N+lzVNSBJUlSOI33zj79eKLWJu2jRPKdvHOI2sBXJZUgOU6dtJQu/lXutRlmGcwF5XPlBntdyL0gWcfVkGlX2d8eASjrIB5cR6Jh4raW0Zw3XlWNmKZ92Uni8sDS8O1i8SYVRdG6ODvn31ZA/PxH29A5xXperywC96R98DbKsQgHkV0gegQnaLR+h/EfEMeKUCmjibkgpNBQ0VsIHzQeF21FTIJpTUhf8AnMY7oMTf7fEAAAAASUVORK5CYII%3D);
}